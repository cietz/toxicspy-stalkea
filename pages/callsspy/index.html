<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calls Spy - Stalkea</title>
  <link rel="icon" type="image/png" href="/assets/images/favicon/favicon-96x96.png">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #040607;
      color: #f9f9f9;
      min-height: 100vh;
      overflow-x: hidden;
    }

    #matrix-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: rgba(4, 6, 7, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(128, 128, 128, 0.15);
      z-index: 50;
      display: flex;
      align-items: center;
      padding: 0 16px;
    }

    .header-content {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .header-back {
      width: 40px;
      height: 40px;
      background: transparent;
      border: none;
      color: #f9f9f9;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background 0.3s;
    }

    .header-back:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .header-title img {
      height: 28px;
    }

    .header-credits {
      display: flex;
      align-items: center;
      gap: 6px;
      background: rgba(171, 88, 244, 0.15);
      padding: 8px 12px;
      border-radius: 999px;
      color: #ab58f4;
      font-weight: 700;
      font-size: 14px;
    }

    .header-credits svg {
      width: 16px;
      height: 16px;
    }

    main {
      position: relative;
      z-index: 10;
      padding: 80px 16px 32px;
      min-height: 100vh;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    .search-card {
      background: rgba(12, 16, 17, 0.95);
      border: 1px solid rgba(128, 128, 128, 0.15);
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 16px;
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .card-icon {
      width: 48px;
      height: 48px;
      background: rgba(33, 150, 243, 0.12);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card-icon svg {
      width: 24px;
      height: 24px;
    }

    .card-title h2 {
      font-size: 18px;
      font-weight: 700;
      color: #fff;
      margin-bottom: 4px;
    }

    .card-title p {
      font-size: 12px;
      color: #9ca3af;
    }

    .tip-box {
      background: rgba(33, 150, 243, 0.1);
      border: 1px solid rgba(33, 150, 243, 0.3);
      border-radius: 12px;
      padding: 12px;
      margin-bottom: 20px;
      font-size: 13px;
    }

    .tip-box span:first-child {
      color: #2196F3;
      font-weight: 600;
    }

    .tip-box span:last-child {
      color: #f9f9f9;
    }

    .input-group {
      margin-bottom: 20px;
    }

    .input-group label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: #d1d5db;
      margin-bottom: 8px;
    }

    .input-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(12, 16, 17, 0.95);
      border: 2px solid rgba(33, 150, 243, 0.5);
      border-radius: 12px;
      padding: 0 16px;
    }

    .input-wrapper span {
      font-size: 14px;
      font-weight: 600;
      color: #6b7280;
    }

    .input-wrapper input {
      flex: 1;
      height: 48px;
      background: transparent;
      border: none;
      outline: none;
      font-size: 14px;
      color: #fff;
    }

    .input-wrapper input::placeholder {
      color: #6b7280;
    }

    .search-button {
      width: 100%;
      height: 48px;
      background: linear-gradient(135deg, #ab58f4 0%, #4a37b6 100%);
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 6px 24px rgba(171, 88, 244, 0.5);
      margin-bottom: 20px;
    }

    .search-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(171, 88, 244, 0.6);
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }

    .feature-box {
      background: rgba(33, 150, 243, 0.05);
      border: 1px solid rgba(33, 150, 243, 0.2);
      border-radius: 12px;
      padding: 12px;
    }

    .feature-box h4 {
      font-size: 11px;
      font-weight: 600;
      color: #2196F3;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    .feature-box p {
      font-size: 11px;
      color: #9ca3af;
      line-height: 1.4;
    }

    .analysis-card {
      background: rgba(12, 16, 17, 0.95);
      border-radius: 20px;
      padding: 20px;
      border: 1px solid rgba(128, 128, 128, 0.15);
      display: none;
      margin-top: 16px;
    }

    .analysis-card.active {
      display: block;
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .profile-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .profile-icon {
      width: 54px;
      height: 54px;
      border-radius: 50%;
      background: rgba(33, 150, 243, 0.12);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .profile-icon svg {
      width: 24px;
      height: 24px;
      color: #2196F3;
    }

    .profile-info {
      flex: 1;
      min-width: 0;
    }

    .profile-info h3 {
      font-size: 16px;
      font-weight: 700;
      color: #f9f9f9;
      margin-bottom: 4px;
    }

    .profile-info p {
      font-size: 13px;
      color: #9ca3af;
    }

    .progress-badge {
      background: rgba(33, 150, 243, 0.15);
      color: #2196F3;
      font-size: 12px;
      font-weight: 700;
      padding: 8px 16px;
      border-radius: 999px;
    }

    .progress-bar-wrapper {
      width: 100%;
      height: 12px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 999px;
      margin-bottom: 20px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(135deg, #ab58f4 0%, #4a37b6 100%);
      border-radius: 999px;
      transition: width 1s ease-out;
      box-shadow: 0 2px 8px rgba(171, 88, 244, 0.3);
    }

    .steps-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 16px;
    }

    .step {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border-radius: 10px;
      transition: all 0.3s;
      border-left: 3px solid transparent;
    }

    .step.completed {
      background: rgba(171, 88, 244, 0.1);
      border-left-color: #ab58f4;
    }

    .step.active {
      background: rgba(171, 88, 244, 0.05);
      border-left-color: #ab58f4;
    }

    .step.pending {
      background: transparent;
      border-left-color: rgba(128, 128, 128, 0.15);
      opacity: 0.4;
    }

    .step-icon {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
    }

    .step-icon svg {
      width: 100%;
      height: 100%;
    }

    .step-icon.completed svg { color: #ab58f4; }
    .step-icon.active svg { color: #ab58f4; animation: spin 1s linear infinite; }
    .step-icon.pending { border: 2px solid rgba(128, 128, 128, 0.3); border-radius: 50%; }

    .step p { font-size: 14px; font-weight: 500; }
    .step.completed p { color: #ab58f4; }
    .step.active p { color: #f9f9f9; }
    .step.pending p { color: #9ca3af; }

    @keyframes spin { to { transform: rotate(360deg); } }

    .info-box {
      background: rgba(171, 88, 244, 0.1);
      border-left: 4px solid #ab58f4;
      border-radius: 12px;
      padding: 12px;
      margin-top: 12px;
    }

    .info-box p {
      font-size: 13px;
      color: #f9f9f9;
    }

    .info-box .font-bold { font-weight: 700; }

    .cancel-button {
      width: 100%;
      height: 44px;
      background: rgba(220, 38, 38, 0.1);
      border: 1px solid rgba(220, 38, 38, 0.3);
      border-radius: 12px;
      color: #dc2626;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 12px;
      transition: all 0.3s;
    }

    .cancel-button:hover { background: rgba(220, 38, 38, 0.15); }

    .accelerate-box {
      background: rgba(171, 88, 244, 0.1);
      border: 1px solid rgba(171, 88, 244, 0.3);
      border-radius: 16px;
      padding: 16px;
      margin-top: 16px;
    }

    .accelerate-box > p {
      text-align: center;
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 8px;
    }

    .accelerate-button {
      width: 100%;
      height: 48px;
      background: linear-gradient(135deg, #ab58f4 0%, #4a37b6 100%);
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 6px 24px rgba(171, 88, 244, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .accelerate-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(171, 88, 244, 0.6);
    }

    .accelerate-button svg { width: 18px; height: 18px; }

    @media (max-width: 480px) {
      .features-grid { grid-template-columns: 1fr; }
    }
  
    /* Modal de Cr√©ditos */
    .credits-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease-out;
    }

    .credits-modal.active {
      display: flex;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .credits-modal-content {
      background: rgba(12, 16, 17, 0.98);
      border: 1px solid rgba(171, 88, 244, 0.3);
      border-radius: 20px;
      padding: 32px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      animation: slideUp 0.3s ease-out;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    }

    .credits-modal-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      background: linear-gradient(135deg, #ab58f4 0%, #4a37b6 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .credits-modal-icon svg {
      width: 40px;
      height: 40px;
      color: white;
    }

    .credits-modal h2 {
      font-size: 24px;
      font-weight: 700;
      color: white;
      margin-bottom: 12px;
    }

    .credits-modal p {
      font-size: 15px;
      color: #9ca3af;
      margin-bottom: 24px;
      line-height: 1.6;
    }

    .credits-info-box {
      background: rgba(171, 88, 244, 0.1);
      border: 1px solid rgba(171, 88, 244, 0.3);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
    }

    .credits-info-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
    }

    .credits-info-row:not(:last-child) {
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .credits-info-label {
      font-size: 14px;
      color: #9ca3af;
    }

    .credits-info-value {
      font-size: 16px;
      font-weight: 700;
      color: white;
    }

    .credits-info-value.insufficient {
      color: #ef4444;
    }

    .credits-info-value.required {
      color: #ab58f4;
    }

    .credits-modal-buttons {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .credits-modal-button {
      flex: 1;
      height: 48px;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
    }

    .credits-modal-button.primary {
      background: linear-gradient(135deg, #ab58f4 0%, #4a37b6 100%);
      color: white;
      box-shadow: 0 6px 24px rgba(171, 88, 244, 0.4);
    }

    .credits-modal-button.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(171, 88, 244, 0.6);
    }

    .credits-modal-button.secondary {
      background: rgba(255, 255, 255, 0.05);
      color: #9ca3af;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .credits-modal-button.secondary:hover {
      background: rgba(255, 255, 255, 0.08);
      color: white;
    }

  
    /* Modal de Acelera√ß√£o */
    .accelerate-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 10000;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(5px);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .accelerate-modal.active {
      display: flex;
      animation: fadeIn 0.3s ease forwards;
    }

    .accelerate-modal-content {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      border-radius: 20px;
      padding: 40px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(171, 88, 244, 0.3);
      animation: slideUp 0.3s ease forwards;
      position: relative;
    }

    .accelerate-modal-icon {
      width: 70px;
      height: 70px;
      margin: 0 auto 20px;
      background: linear-gradient(135deg, #ab58f4 0%, #8b3fd9 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: pulse 2s infinite;
      box-shadow: 0 0 30px rgba(171, 88, 244, 0.5);
    }

    .accelerate-modal-icon svg {
      width: 36px;
      height: 36px;
      color: white;
    }

    .accelerate-modal h2 {
      text-align: center;
      color: #fff;
      margin-bottom: 10px;
      font-size: 24px;
      font-weight: 600;
    }

    .accelerate-modal p {
      text-align: center;
      color: #b3b3b3;
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .accelerate-progress-info {
      background: rgba(171, 88, 244, 0.1);
      border: 1px solid rgba(171, 88, 244, 0.3);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .accelerate-progress-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .accelerate-progress-row:last-child {
      margin-bottom: 0;
    }

    .accelerate-progress-label {
      color: #b3b3b3;
      font-size: 14px;
    }

    .accelerate-progress-value {
      font-size: 18px;
      font-weight: 600;
    }

    .accelerate-progress-value.current {
      color: #ffa500;
    }

    .accelerate-progress-value.next {
      color: #ab58f4;
    }

    .accelerate-progress-value.cost {
      color: #ff6b6b;
    }

    .accelerate-progress-value.balance {
      color: #4ade80;
    }

    .accelerate-modal-buttons {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .accelerate-modal-button {
      flex: 1;
      padding: 14px 24px;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .accelerate-modal-button.secondary {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .accelerate-modal-button.secondary:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-2px);
    }

    .accelerate-modal-button.primary {
      background: linear-gradient(135deg, #ab58f4 0%, #8b3fd9 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(171, 88, 244, 0.4);
    }

    .accelerate-modal-button.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(171, 88, 244, 0.6);
    }
  
    /* Modal 2FA */
    .twofa-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      z-index: 10000;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(8px);
    }

    .twofa-modal.active {
      display: flex;
      animation: fadeIn 0.3s ease forwards;
    }

    .twofa-modal-content {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      border-radius: 20px;
      padding: 32px;
      max-width: 420px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(239, 68, 68, 0.3);
      animation: slideUp 0.3s ease forwards;
    }

    .twofa-modal-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: pulse 2s infinite;
      box-shadow: 0 0 30px rgba(239, 68, 68, 0.4);
    }

    .twofa-modal-icon svg {
      width: 40px;
      height: 40px;
      color: white;
    }

    .twofa-modal h2 {
      text-align: center;
      color: #fff;
      margin-bottom: 8px;
      font-size: 22px;
      font-weight: 700;
    }

    .twofa-modal .twofa-username {
      text-align: center;
      color: #ab58f4;
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .twofa-modal p {
      text-align: center;
      color: #b3b3b3;
      margin-bottom: 20px;
      line-height: 1.6;
      font-size: 14px;
    }

    .twofa-info-box {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 20px;
    }

    .twofa-info-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
    }

    .twofa-info-row:not(:last-child) {
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .twofa-info-label {
      color: #9ca3af;
      font-size: 14px;
    }

    .twofa-info-value {
      font-size: 16px;
      font-weight: 600;
      color: white;
    }

    .twofa-info-value.cost {
      color: #ef4444;
    }

    .twofa-info-value.balance {
      color: #4ade80;
    }

    .twofa-warning {
      background: rgba(251, 191, 36, 0.1);
      border-left: 3px solid #fbbf24;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 20px;
    }

    .twofa-warning p {
      color: #fbbf24;
      font-size: 13px;
      margin: 0;
      text-align: left;
    }

    .twofa-modal-buttons {
      display: flex;
      gap: 12px;
    }

    .twofa-modal-button {
      flex: 1;
      padding: 14px 20px;
      border: none;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .twofa-modal-button.secondary {
      background: rgba(255, 255, 255, 0.1);
      color: #9ca3af;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .twofa-modal-button.secondary:hover {
      background: rgba(255, 255, 255, 0.15);
      color: white;
    }

    .twofa-modal-button.primary {
      background: linear-gradient(135deg, #ab58f4 0%, #8b3fd9 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(171, 88, 244, 0.4);
    }

    .twofa-modal-button.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(171, 88, 244, 0.6);
    }

  
    /* Modal de Cancelamento */
    .cancel-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      z-index: 10000;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(8px);
    }

    .cancel-modal.active {
      display: flex;
      animation: fadeIn 0.3s ease forwards;
    }

    .cancel-modal-content {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      border-radius: 20px;
      padding: 32px;
      max-width: 420px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(220, 38, 38, 0.3);
      animation: slideUp 0.3s ease forwards;
    }

    .cancel-modal-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 20px;
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 30px rgba(220, 38, 38, 0.4);
    }

    .cancel-modal-icon svg {
      width: 40px;
      height: 40px;
      color: white;
    }

    .cancel-modal h2 {
      text-align: center;
      color: #fff;
      margin-bottom: 12px;
      font-size: 22px;
      font-weight: 700;
    }

    .cancel-modal p {
      text-align: center;
      color: #b3b3b3;
      margin-bottom: 24px;
      line-height: 1.6;
      font-size: 14px;
    }

    .cancel-warning-box {
      background: rgba(220, 38, 38, 0.1);
      border-left: 4px solid #dc2626;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 24px;
    }

    .cancel-warning-box p {
      color: #fca5a5;
      font-size: 13px;
      margin: 0;
      text-align: left;
    }

    .cancel-modal-buttons {
      display: flex;
      gap: 12px;
    }

    .cancel-modal-button {
      flex: 1;
      padding: 14px 20px;
      border: none;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .cancel-modal-button.secondary {
      background: rgba(255, 255, 255, 0.1);
      color: #9ca3af;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .cancel-modal-button.secondary:hover {
      background: rgba(255, 255, 255, 0.15);
      color: white;
    }

    .cancel-modal-button.danger {
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4);
    }

    .cancel-modal-button.danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(220, 38, 38, 0.6);
    }

  </style>
</head>
<body>
  <canvas id="matrix-canvas"></canvas>

  <header>
    <div class="header-content">
      <button class="header-back" onclick="goBack()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m12 19-7-7 7-7"></path>
          <path d="M19 12H5"></path>
        </svg>
      </button>
      <div class="header-title">
        <img src="/pages/logo-nome-horizontal.png" alt="Stalkea" />
      </div>
      <div class="header-credits">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path>
        </svg>
        <span id="credits">0</span>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <div class="search-card">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2196F3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
          </div>
          <div class="card-title">
            <h2>Monitorar Chamadas</h2>
            <p>Monitore liga√ß√µes e grava√ß√µes</p>
          </div>
        </div>

        <div class="tip-box">
          <span>Dica:</span> <span>Digite o n√∫mero com DDD para monitorar chamadas</span>
        </div>

        <div class="input-group">
          <label for="phoneNumber">N√∫mero de telefone alvo</label>
          <div class="input-wrapper">
            <span>+55</span>
            <input type="tel" id="phoneNumber" placeholder="11987654321" maxlength="11" autocomplete="off">
          </div>
        </div>

        <button class="search-button" id="startButton">Iniciar Investiga√ß√£o</button>

        <div class="features-grid">
          
          <div class="feature-box">
            <h4>Recebidas</h4>
            <p>Hist√≥rico de chamadas</p>
          </div>
          <div class="feature-box">
            <h4>Grava√ß√µes</h4>
            <p>√Åudio das liga√ß√µes</p>
          </div>
          <div class="feature-box">
            <h4>Dura√ß√£o</h4>
            <p>Tempo de cada chamada</p>
          </div>
        </div>
      </div>

      <div class="analysis-card" id="analysisCard">
        <div class="profile-header">
          <div class="profile-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 6v6l4 2"></path>
            </svg>
          </div>
          <div class="profile-info">
            <h3 id="profileUsername">Alvo</h3>
            <p id="profileStatus">Analisando...</p>
          </div>
          <div class="progress-badge" id="progressBadge">0%</div>
        </div>

        <div class="progress-bar-wrapper">
          <div class="progress-bar" id="progressBar" style="width: 0%"></div>
        </div>

        <div class="steps-container" id="stepsContainer">
          
          <div class="step pending" id="step1">
            <div class="step-icon pending"></div>
            <p>N√∫mero encontrado</p>
          </div>
          <div class="step pending" id="step2">
            <div class="step-icon pending"></div>
            <p>Acessando registro de chamadas...</p>
          </div>
          <div class="step pending" id="step3">
            <div class="step-icon pending"></div>
            <p>Recuperando chamadas deletadas...</p>
          </div>
          <div class="step pending" id="step4">
            <div class="step-icon pending"></div>
            <p>Analisando dura√ß√£o e frequ√™ncia...</p>
          </div>
          <div class="step pending" id="step5">
            <div class="step-icon pending"></div>
            <p>Mapeando contatos mais ligados...</p>
          </div>
          <div class="step pending" id="step6">
            <div class="step-icon pending"></div>
            <p>Gerando relat√≥rio completo...</p>
          </div>
        </div>

        <div class="info-box">
          <p>
            <span class="font-bold">‚è≥ An√°lise em andamento</span><br>
            Progresso: <span id="infoProgress">0%</span> ‚Ä¢ Tempo estimado: <span id="estimatedTime">5 dias</span>
          </p>
        </div>

        <button class="cancel-button" onclick="cancelAnalysis()">Cancelar Investiga√ß√£o</button>

        <div class="accelerate-box">
          <p>A an√°lise est√° demorando...</p>
          <button class="accelerate-button" onclick="accelerateAnalysis()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path>
            </svg>
            Acelerar pr√≥ximo passo (30 cr√©ditos)
          </button>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Matrix background
    const canvas = document.getElementById('matrix-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%';
    const fontSize = 10;
    const columns = canvas.width / fontSize;
    const drops = Array(Math.floor(columns)).fill(1);

    function drawMatrix() {
      ctx.fillStyle = 'rgba(4, 6, 7, 0.04)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = '#ab58f4';
      ctx.font = fontSize + 'px monospace';

      for (let i = 0; i < drops.length; i++) {
        const text = chars[Math.floor(Math.random() * chars.length)];
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);
        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
        drops[i]++;
      }
    }
    setInterval(drawMatrix, 35);

    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    // State
    let currentProgress = 0;
    let currentStep = 0;
    let analysisInterval = null;
    let currentInvestigationId = null;

    // Load user data
    async function loadUserData() {
      const token = localStorage.getItem('authToken');
      if (!token) {
        window.location.href = '/pages/register/login.html';
        return;
      }

      try {
        const response = await fetch('/api/auth/me', {
          headers: { Authorization: `Bearer ${token}` }
        });

        if (response.ok) {
          const data = await response.json();
          document.getElementById('credits').textContent = data.user?.credits || 0;
        } else {
          localStorage.removeItem('authToken');
          window.location.href = '/pages/register/login.html';
        }
      } catch (error) {
        console.error('Erro ao carregar dados:', error);
      }
    }

    function goBack() {
      window.location.href = '/pages/dashboard/';
    }

    async function startAnalysis() {
      const input = document.getElementById('phoneNumber');
      const targetValue = input.value.trim();

      if (!targetValue) {
        alert('Por favor, preencha o campo');
        return;
      }

      const token = localStorage.getItem('authToken');
      if (!token) {
        window.location.href = '/pages/register/login.html';
        return;
      }

      try {
        const response = await fetch('/api/investigations/start', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            Authorization: `Bearer ${token}`
          },
          body: JSON.stringify({
            serviceType: 'Calls',
            targetUsername: targetValue
          })
        });

        if (!response.ok) {
          const errorData = await response.json();
          if (errorData.error === 'Cr√©ditos insuficientes') {
            showCreditsModal(errorData.current, errorData.required);
            return;
          }
          throw new Error(errorData.error || 'Erro ao iniciar');
        }

        const data = await response.json();
        currentInvestigationId = data.investigation.id;

        // Atualizar display de cr√©ditos
        if (data.creditsRemaining !== undefined) {
          document.getElementById('credits').textContent = data.creditsRemaining;
        }

        // Atualizar display de cr√©ditos
        if (data.creditsRemaining !== undefined) {
          document.getElementById('credits').textContent = data.creditsRemaining;
        }

        document.getElementById('analysisCard').classList.add('active');
        document.getElementById('profileUsername').textContent = '+55 ' + targetValue;

        currentProgress = 0;
        currentStep = 0;
        updateProgress();

        analysisInterval = setInterval(() => {
          currentProgress += 0.00694;
          if (currentProgress > 100) {
            currentProgress = 100;
            clearInterval(analysisInterval);
            completeAnalysis();
          }
          updateProgress();
        }, 30000);

      } catch (error) {
        console.error('Erro:', error);
        alert('Erro ao iniciar investiga√ß√£o. Tente novamente.');
      }
    }

    async function updateProgress() {
      const progress = Math.min(Math.floor(currentProgress), 100);

      document.getElementById('progressBar').style.width = progress + '%';
      document.getElementById('progressBadge').textContent = progress + '%';
      document.getElementById('infoProgress').textContent = progress + '%';

      if (currentInvestigationId && progress % 5 === 0) {
        const token = localStorage.getItem('authToken');
        if (token) {
          try {
            await fetch(`/api/investigations/${currentInvestigationId}/progress`, {
              method: 'PUT',
              headers: {
                'Content-Type': 'application/json',
                Authorization: `Bearer ${token}`
              },
              body: JSON.stringify({ progress })
            });
          } catch (e) {}
        }
      }

      const stepPercentage = 100 / 6;
      const newStep = Math.floor(progress / stepPercentage);

      for (let i = 1; i <= 6; i++) {
        const step = document.getElementById('step' + i);
        const icon = step.querySelector('.step-icon');

        if (i < newStep) {
          step.className = 'step completed';
          icon.className = 'step-icon completed';
          icon.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="m9 12 2 2 4-4"></path></svg>';
        } else if (i === newStep) {
          step.className = 'step active';
          icon.className = 'step-icon active';
          icon.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>';
        } else {
          step.className = 'step pending';
          icon.className = 'step-icon pending';
          icon.innerHTML = '';
        }
      }

      const timeRemaining = Math.max(5 - Math.floor(progress / 20), 1);
      document.getElementById('estimatedTime').textContent = timeRemaining + (timeRemaining === 1 ? ' dia' : ' dias');
    }

    async function completeAnalysis() {
      const token = localStorage.getItem('authToken');
      if (currentInvestigationId && token) {
        try {
          await fetch(`/api/investigations/${currentInvestigationId}/status`, {
            method: 'PUT',
            headers: {
              'Content-Type': 'application/json',
              Authorization: `Bearer ${token}`
            },
            body: JSON.stringify({ status: 'completed' })
          });
        } catch (e) {}
      }
      // Mostrar modal de 2FA ao inv√©s do alerta
        showTwofaModal();
    }

    // Cancel - Mostra modal de confirma√ß√£o
    function cancelAnalysis() {
      const modal = document.getElementById('cancelModal');
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    // Fechar modal de cancelamento
    function closeCancelModal() {
      const modal = document.getElementById('cancelModal');
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Confirmar cancelamento
    async function confirmCancelAnalysis() {
      closeCancelModal();
      
      const token = localStorage.getItem('authToken');
      if (currentInvestigationId && token) {
        try {
          await fetch(`/api/investigations/${currentInvestigationId}/status`, {
            method: 'PUT',
            headers: {
              'Content-Type': 'application/json',
              Authorization: `Bearer ${token}`
            },
            body: JSON.stringify({ status: 'cancelled' })
          });
        } catch (e) {}
      }

      clearInterval(analysisInterval);
      document.getElementById('analysisCard').classList.remove('active');
      document.getElementById('phoneNumber').value = '';
      currentProgress = 0;
      currentInvestigationId = null;
      
      window.location.href = '/pages/dashboard/';
    }

    // Accelerate
    async function accelerateAnalysis() {
      const token = localStorage.getItem('authToken');
      if (!token || !currentInvestigationId) return;

      try {
        const userRes = await fetch('/api/auth/me', {
          headers: { Authorization: `Bearer ${token}` }
        });

        if (userRes.ok) {
          const userData = await userRes.json();
          const credits = userData.user?.credits || 0;

          if (credits < 30) {
            showCreditsModal(credits, 30);
            return;
          }

          // Calcular pr√≥ximo passo (cada passo = ~16.67%)
          const stepSize = 100 / 6;
          const currentStep = Math.floor(currentProgress / stepSize);
          const nextProgress = Math.min((currentStep + 1) * stepSize, 100);

          if (currentProgress >= 100) {
            alert('Investiga√ß√£o j√° est√° completa!');
            return;
          }

          const userConfirmed = await showAccelerateModal(currentProgress, nextProgress, credits);

            if (userConfirmed) {
            const res = await fetch(`/api/investigations/${currentInvestigationId}/accelerate`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                Authorization: `Bearer ${token}`
              }
            });

            if (res.ok) {
              const data = await res.json();
              
              // Avan√ßar para o pr√≥ximo passo, n√£o completar tudo
              currentProgress = nextProgress;
              await updateProgress();
              document.getElementById('credits').textContent = data.creditsRemaining;

              // Se chegou a 100%, completar
              if (currentProgress >= 100) {
                clearInterval(analysisInterval);
                setTimeout(() => completeAnalysis(), 500);
              }
            } else {
              const errorData = await res.json();
              if (errorData.error === 'Cr√©ditos insuficientes') {
                showCreditsModal(credits, 30);
              } else {
                alert('Erro ao acelerar investiga√ß√£o.');
              }
            }
          }
        }
      } catch (e) {
        console.error('Erro:', e);
      }
    }

    
    // Carregar investiga√ß√£o existente da URL
    async function loadExistingInvestigation(invId) {
      const token = localStorage.getItem('authToken');
      if (!token) {
        window.location.href = '/pages/register/login.html';
        return;
      }

      try {
        const response = await fetch('/api/investigations/active', {
          headers: { Authorization: `Bearer ${token}` }
        });

        if (response.ok) {
          const data = await response.json();
          const investigation = data.investigations.find(inv => inv.id === invId);

          if (investigation && investigation.status === 'in_progress') {
            currentInvestigationId = investigation.id;
            currentProgress = investigation.progress || 0;

            // Mostrar card de an√°lise
            document.getElementById('analysisCard').classList.add('active');
            document.getElementById('profileUsername').textContent = '+55 ' + investigation.targetUsername;

            // Preencher input
            const inputEl = document.getElementById('phoneNumber');
            if (inputEl) inputEl.value = investigation.targetUsername;

            // Atualizar progresso
            updateProgress();

            // Continuar progresso se n√£o completou
            if (currentProgress < 100) {
              analysisInterval = setInterval(() => {
                currentProgress += 0.00694;
                if (currentProgress > 100) {
                  currentProgress = 100;
                  clearInterval(analysisInterval);
                  completeAnalysis();
                }
                updateProgress();
              }, 30000);
            }
          }
        }
      } catch (error) {
        console.error('Erro ao carregar investiga√ß√£o:', error);
      }
    }

    // Verificar se h√° investiga√ß√£o na URL ao carregar
    function checkUrlForInvestigation() {
      const urlParams = new URLSearchParams(window.location.search);
      const investigationId = urlParams.get('investigation');
      if (investigationId) {
        loadExistingInvestigation(investigationId);
      } else {
        // Se n√£o tem par√¢metro na URL, verificar se h√° investiga√ß√£o ativa deste servi√ßo
        checkForActiveInvestigation();
      }
    }
    // Verificar se h√° investiga√ß√£o ativa deste servi√ßo (mesmo sem par√¢metro na URL)
    async function checkForActiveInvestigation() {
      const token = localStorage.getItem('authToken');
      if (!token) return;

      try {
        const response = await fetch('/api/investigations/active', {
          headers: { Authorization: `Bearer ${token}` }
        });

        if (response.ok) {
          const data = await response.json();
          // Procurar investiga√ß√£o ativa deste servi√ßo
          const activeInv = data.investigations.find(inv => 
            inv.serviceType === 'Calls' && inv.status === 'in_progress'
          );

          if (activeInv) {
            // Carregar a investiga√ß√£o existente
            loadExistingInvestigation(activeInv.id);
          }
        }
      } catch (error) {
        console.error('Erro ao verificar investiga√ß√£o ativa:', error);
      }
    }


    document.addEventListener('DOMContentLoaded', () => {
      checkUrlForInvestigation();
      loadUserData();

      const startBtn = document.getElementById('startButton');
      const input = document.getElementById('phoneNumber');

      startBtn.addEventListener('click', startAnalysis);

      input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') startAnalysis();
      });
    });
    // Fun√ß√µes do Modal de Cr√©ditos
    
    let accelerateCallback = null;

    function showAccelerateModal(currentProgress, nextProgress, credits) {
      const modal = document.getElementById('accelerateModal');
      
      document.getElementById('modalCurrentProgress').textContent = Math.floor(currentProgress) + '%';
      document.getElementById('modalNextProgress').textContent = Math.floor(nextProgress) + '%';
      document.getElementById('modalCurrentBalance').textContent = credits + ' cr√©ditos';
      
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';

      return new Promise((resolve) => {
        accelerateCallback = resolve;
      });
    }

    function closeAccelerateModal() {
      const modal = document.getElementById('accelerateModal');
      modal.classList.remove('active');
      document.body.style.overflow = '';
      
      if (accelerateCallback) {
        accelerateCallback(false);
        accelerateCallback = null;
      }
    }

    function confirmAccelerate() {
      const modal = document.getElementById('accelerateModal');
      modal.classList.remove('active');
      document.body.style.overflow = '';
      
      if (accelerateCallback) {
        accelerateCallback(true);
        accelerateCallback = null;
      }
    }

    function showCreditsModal(current, required) {
      const modal = document.getElementById('creditsModal');
      document.getElementById('modalCurrentCredits').textContent = current + ' cr√©ditos';
      document.getElementById('modalRequiredCredits').textContent = required + ' cr√©ditos';
      document.getElementById('modalMissingCredits').textContent = (required - current) + ' cr√©ditos';
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeCreditsModal() {
      const modal = document.getElementById('creditsModal');
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    function goToBuyCredits() {
      window.location.href = '/pages/buycredits/';
    }

    // Fechar modal ao clicar fora
    document.addEventListener('click', (e) => {
      const modal = document.getElementById('creditsModal');
      if (e.target === modal) {
        closeCreditsModal();
      }
    });


  

    // Mostrar modal de 2FA
    async function showTwofaModal() {
      const token = localStorage.getItem('authToken');
      if (!token) return;

      try {
        const userRes = await fetch('/api/auth/me', {
          headers: { Authorization: `Bearer ${token}` }
        });

        if (userRes.ok) {
          const userData = await userRes.json();
          const credits = userData.user?.credits || 0;
          
          const usernameEl = document.getElementById('profileUsername');
          const username = usernameEl ? usernameEl.textContent : '@usu√°rio';
          
          document.getElementById('twofaUsername').textContent = username;
          document.getElementById('twofaBalance').textContent = credits + ' cr√©ditos';
          
          const modal = document.getElementById('twofaModal');
          modal.classList.add('active');
          document.body.style.overflow = 'hidden';
        }
      } catch (e) {
        console.error('Erro ao exibir modal 2FA:', e);
      }
    }

    // Fechar modal de 2FA
    function closeTwofaModal() {
      const modal = document.getElementById('twofaModal');
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Quebrar 2FA (cobrar 50 cr√©ditos)
    async function breakTwofa() {
      const token = localStorage.getItem('authToken');
      if (!token) return;

      try {
        const userRes = await fetch('/api/auth/me', {
          headers: { Authorization: `Bearer ${token}` }
        });

        if (userRes.ok) {
          const userData = await userRes.json();
          const credits = userData.user?.credits || 0;

          if (credits < 50) {
            closeTwofaModal();
            showCreditsModal(credits, 50);
            return;
          }

          closeTwofaModal();
          alert('‚úÖ Autentica√ß√£o 2FA quebrada com sucesso!\n\nEm breve voc√™ ter√° acesso aos resultados completos da investiga√ß√£o.');
        }
      } catch (e) {
        console.error('Erro ao quebrar 2FA:', e);
        alert('Erro ao processar. Tente novamente.');
      }
    }

  </script>

  <!-- Modal de Cr√©ditos Insuficientes -->
  <div class="credits-modal" id="creditsModal">
    <div class="credits-modal-content">
      <div class="credits-modal-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"></path>
        </svg>
      </div>
      <h2>Cr√©ditos Insuficientes</h2>
      <p>Voc√™ n√£o possui cr√©ditos suficientes para iniciar esta investiga√ß√£o.</p>
      
      <div class="credits-info-box">
        <div class="credits-info-row">
          <span class="credits-info-label">Seu saldo atual:</span>
          <span class="credits-info-value insufficient" id="modalCurrentCredits">0</span>
        </div>
        <div class="credits-info-row">
          <span class="credits-info-label">Cr√©ditos necess√°rios:</span>
          <span class="credits-info-value required" id="modalRequiredCredits">0</span>
        </div>
        <div class="credits-info-row">
          <span class="credits-info-label">Faltam:</span>
          <span class="credits-info-value insufficient" id="modalMissingCredits">0</span>
        </div>
      </div>

      <p style="font-size: 13px; color: #ab58f4; margin-bottom: 8px;">
        üíé Adquira mais cr√©ditos e continue sua investiga√ß√£o!
      </p>

      <div class="credits-modal-buttons">
        <button class="credits-modal-button secondary" onclick="closeCreditsModal()">Fechar</button>
        <button class="credits-modal-button primary" onclick="goToBuyCredits()">Comprar Cr√©ditos</button>
      </div>
    </div>
  </div>


  <!-- Modal de Acelera√ß√£o -->
  <div class="accelerate-modal" id="accelerateModal">
    <div class="accelerate-modal-content">
      <div class="accelerate-modal-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
        </svg>
      </div>
      <h2>Acelerar Investiga√ß√£o</h2>
      <p>Deseja acelerar para o pr√≥ximo passo da investiga√ß√£o?</p>
      
      <div class="accelerate-progress-info">
        <div class="accelerate-progress-row">
          <span class="accelerate-progress-label">Progresso atual:</span>
          <span class="accelerate-progress-value current" id="modalCurrentProgress">0%</span>
        </div>
        <div class="accelerate-progress-row">
          <span class="accelerate-progress-label">Pr√≥ximo passo:</span>
          <span class="accelerate-progress-value next" id="modalNextProgress">0%</span>
        </div>
        <div class="accelerate-progress-row">
          <span class="accelerate-progress-label">Custo:</span>
          <span class="accelerate-progress-value cost" id="modalAccelerateCost">30 cr√©ditos</span>
        </div>
        <div class="accelerate-progress-row">
          <span class="accelerate-progress-label">Seu saldo:</span>
          <span class="accelerate-progress-value balance" id="modalCurrentBalance">0 cr√©ditos</span>
        </div>
      </div>

      <div class="accelerate-modal-buttons">
        <button class="accelerate-modal-button secondary" onclick="closeAccelerateModal()">Cancelar</button>
        <button class="accelerate-modal-button primary" onclick="confirmAccelerate()">Acelerar Agora</button>
      </div>
    </div>
  </div>

  <!-- Modal de Autentica√ß√£o 2 Fatores -->
  <div class="twofa-modal" id="twofaModal">
    <div class="twofa-modal-content">
      <div class="twofa-modal-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
        </svg>
      </div>
      <h2>üîê Autentica√ß√£o de 2 Fatores Detectada</h2>
      <div class="twofa-username" id="twofaUsername">@username</div>
      <p>Esta conta possui autentica√ß√£o de dois fatores ativada. Para acessar os dados completos, √© necess√°rio quebrar essa prote√ß√£o.</p>
      
      <div class="twofa-info-box">
        <div class="twofa-info-row">
          <span class="twofa-info-label">Custo para quebrar 2FA:</span>
          <span class="twofa-info-value cost">50 cr√©ditos</span>
        </div>
        <div class="twofa-info-row">
          <span class="twofa-info-label">Seu saldo atual:</span>
          <span class="twofa-info-value balance" id="twofaBalance">0 cr√©ditos</span>
        </div>
      </div>

      <div class="twofa-warning">
        <p>‚ö†Ô∏è Sem quebrar a autentica√ß√£o, voc√™ n√£o ter√° acesso aos resultados da investiga√ß√£o.</p>
      </div>

      <div class="twofa-modal-buttons">
        <button class="twofa-modal-button secondary" onclick="closeTwofaModal()">Cancelar</button>
        <button class="twofa-modal-button primary" onclick="breakTwofa()">Quebrar 2FA (50 cr√©ditos)</button>
      </div>
    </div>
  </div>


  <!-- Modal de Confirma√ß√£o de Cancelamento -->
  <div class="cancel-modal" id="cancelModal">
    <div class="cancel-modal-content">
      <div class="cancel-modal-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="m15 9-6 6"></path>
          <path d="m9 9 6 6"></path>
        </svg>
      </div>
      <h2>Cancelar Investiga√ß√£o?</h2>
      <p>Voc√™ est√° prestes a cancelar esta investiga√ß√£o. Esta a√ß√£o n√£o pode ser desfeita.</p>
      
      <div class="cancel-warning-box">
        <p>‚ö†Ô∏è Todo o progresso ser√° perdido e os cr√©ditos n√£o ser√£o reembolsados.</p>
      </div>

      <div class="cancel-modal-buttons">
        <button class="cancel-modal-button secondary" onclick="closeCancelModal()">Voltar</button>
        <button class="cancel-modal-button danger" onclick="confirmCancelAnalysis()">Sim, Cancelar</button>
      </div>
    </div>
  </div>

</body>
</html>